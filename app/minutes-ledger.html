<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minutes Ledger - Charter Legacy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/app/styles/wizard-premium.css">
    <link rel="stylesheet" href="/app/styles/wizard-layout.css">
    <style>
        :root {
            --obsidian-ink: #0A0A0B;
            --accent-blue: #0066FF;
            --accent-green: #00D084;
            --slab-white: #FFFFFF;
            --radius-lg: 32px;
            --gold-leaf: #d4af37;
        }

        body {
            background: #F0F2F5;
            font-family: 'Inter', sans-serif;
            color: var(--obsidian-ink);
            min-height: 100vh;
            padding: 40px;
        }

        .ledger-container {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 340px 1fr;
            gap: 40px;
            height: 90vh; /* Fixed height for the lab/machine feel */
        }

        /* Sidebar: Historical Records */
        .ledger-sidebar {
            background: white;
            border-radius: var(--radius-lg);
            padding: 32px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            overflow: hidden;
        }

        .sidebar-header {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            font-size: 0.7rem;
            font-weight: 1000;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            opacity: 0.4;
            margin-bottom: 1.5rem;
        }

        .btn-new-minutes {
            width: 100%;
            padding: 16px;
            background: var(--obsidian-ink);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.2s;
            margin-bottom: 2rem;
        }

        .btn-new-minutes:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .minutes-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 8px;
        }

        .minutes-item {
            padding: 20px;
            border-radius: 16px;
            background: #f8f9fb;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .minutes-item:hover {
            background: white;
            border-color: #eee;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .minutes-item.active {
            background: white;
            border-color: var(--accent-blue);
            box-shadow: 0 4px 12px rgba(0,102,255,0.1);
        }

        .item-date {
            font-size: 0.7rem;
            font-weight: 800;
            color: var(--accent-blue);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 4px;
        }

        .item-title {
            font-size: 0.95rem;
            font-weight: 700;
            line-height: 1.3;
        }

        /* Main Workspace: Editor */
        .ledger-workspace {
            background: white;
            border-radius: var(--radius-lg);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 20px 50px rgba(0,0,0,0.04);
            position: relative;
            overflow: hidden;
        }

        .workspace-header {
            padding: 32px 48px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .workspace-title {
            font-size: 1.4rem;
            font-weight: 900;
            letter-spacing: -0.02em;
        }

        .workspace-actions {
            display: flex;
            gap: 12px;
        }

        .btn-action {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-print {
            background: transparent;
            border: 1px solid #ddd;
            color: #555;
        }

        .btn-save {
            background: var(--accent-blue);
            border: 1px solid var(--accent-blue);
            color: white;
        }

        .workspace-body {
            flex: 1;
            padding: 48px;
            overflow-y: auto;
        }

        .form-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 40px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 0.65rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: #aaa;
            margin-bottom: 10px;
        }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid #eee;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s;
            background: #fafafa;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            background: white;
            box-shadow: 0 0 0 4px rgba(0,102,255,0.05);
        }

        .form-textarea {
            width: 100%;
            height: 400px; /* Large area for notes */
            padding: 24px;
            border: 1px solid #eee;
            border-radius: 16px;
            font-size: 1.05rem;
            line-height: 1.6;
            font-weight: 500;
            background: #fafafa;
            resize: none;
            transition: all 0.2s;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
            background: white;
        }

        /* Dictation Button & Waveform */
        .dictation-control {
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 16px 24px;
            background: rgba(0,0,0,0.02);
            border-radius: 14px;
            border: 1px dashed #ddd;
        }

        .btn-dictate {
            width: 44px;
            height: 44px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(244,67,54,0.3);
        }

        .btn-dictate.active {
            animation: pulse-mic 1.5s infinite;
        }

        @keyframes pulse-mic {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244,67,54,0.4); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(244,67,54,0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244,67,54,0); }
        }

        .waveform {
            flex: 1;
            height: 20px;
            display: flex;
            align-items: center;
            gap: 3px;
            opacity: 0.3;
        }

        .wave-bar {
            width: 3px;
            height: 60%;
            background: var(--obsidian-ink);
            border-radius: 2px;
        }

        .dictation-status {
            font-size: 0.75rem;
            font-weight: 700;
            color: #888;
        }

        /* Print Media Styles */
        @media print {
            body { background: white; padding: 0; }
            .ledger-sidebar, .workspace-header, .dictation-control, .workspace-actions { display: none; }
            .ledger-container { display: block; height: auto; }
            .ledger-workspace { border: none; box-shadow: none; display: block; }
            .workspace-body { padding: 0; }
            .form-input, .form-textarea { border: none; background: transparent; padding: 0; margin-bottom: 20px; }
            .form-label { color: black; opacity: 1; font-size: 10pt; }
            .workspace-title { font-size: 24pt; margin-bottom: 40px; text-transform: uppercase; }
        }
    </style>
</head>
<body>

    <div class="ledger-container">
        <!-- Sidebar: Records List -->
        <div class="ledger-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Historical Records</div>
                <button class="btn-new-minutes" onclick="createNewEntry()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    New Meeting Note
                </button>
            </div>

            <div id="minutes-list" class="minutes-list">
                <!-- Minutes items injected here -->
            </div>
        </div>

        <!-- Main Workspace: Editor -->
        <div class="ledger-workspace">
            <div class="workspace-header">
                <div class="workspace-title" id="display-title">New Meeting Minutes</div>
                <div class="workspace-actions">
                    <button class="btn-action btn-print" onclick="window.print()">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <polyline points="6 9 6 2 18 2 18 9"></polyline>
                            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                            <rect x="6" y="14" width="12" height="8"></rect>
                        </svg>
                        Print Archive
                    </button>
                    <button class="btn-action btn-save" onclick="saveCurrentEntry()">
                        Save to Ledger
                    </button>
                </div>
            </div>

            <div class="workspace-body">
                <div class="form-section">
                    <div class="form-group">
                        <label class="form-label">Meeting Date</label>
                        <input type="date" id="meeting-date" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Note Taken On</label>
                        <input type="date" id="recording-date" class="form-input">
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-group">
                        <label class="form-label">Recorder (Note Taker)</label>
                        <input type="text" id="recorder-name" class="form-input" placeholder="Name of person taking notes">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Attendees</label>
                        <input type="text" id="attendees" class="form-input" placeholder="Names of all present">
                    </div>
                </div>

                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">Minutes Body & Resolutions</label>
                    <textarea id="minutes-body" class="form-textarea" placeholder="Describe what happened, what was adopted, and what was resolved..."></textarea>
                </div>

                <!-- Dictation Interface -->
                <div class="dictation-control">
                    <button id="mic-btn" class="btn-dictate" onclick="toggleDictation()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" x2="12" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                    <div class="dictation-status" id="mic-status">Tap to dictate (AI Scrivener)</div>
                    <div class="waveform" id="waveform">
                        <!-- Bars injected by JS animation -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Initialization Scripts -->
    <script src="/app/config.js"></script>
    <script src="/app/scripts/minutes-ledger.js"></script>
</body>
</html>
